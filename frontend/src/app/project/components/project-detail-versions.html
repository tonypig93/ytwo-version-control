<div class="page-header">
    <h3><i class="fa fa-github"></i> Version Control
        <small></small>
    </h3>
</div>
<div class="row" id="project-log">
    <div class="col-sm-4">
        <div class="panel panel-default">
            <div class="panel-heading">Versions</div>
            <div class="panel-body">
                <ul class="list-block">
                    <li>
                        <a href="javascript:;" [class.active]="isCurrent()" (click)="setModel()">New Version</a>
                    </li>
                    <li *ngFor="let item of versions.data | reverse; trackBy: trackByID" (click)="setModel(item.ID)">
                        <a href="javascript:;" [class.active]="isCurrent(item.ID)">{{item.V_MAJOR + '.' + item.V_MINOR + '.' + item.V_PATCH}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-8">
        <div class="panel panel-default">
            <div class="panel-heading">{{selectedVersion}}</div>
            <div class="panel-body">
                <form [formGroup]="form" novalidate (ngSubmit)="doSubmit()">
                    <input type="number" formControlName="ID" class="form-control" readonly>
                    <div class="form-group" *ngIf="!isReadOnly">
                        <div class="row">
                            <div class="col-sm-4">
                                <label>Majoy</label>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="decrease('major')" type="button">-</button>
                                    </span>
                                    <input type="number" class="form-control" formControlName="major">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="increase('major')" type="button">+</button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label>Minor</label>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="decrease('minor')" type="button">-</button>
                                    </span>
                                    <input type="number" class="form-control" formControlName="minor">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="increase('minor')" type="button">+</button>
                                    </span>
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <label>Patch</label>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="decrease('patch')" type="button">-</button>
                                    </span>
                                    <input type="number" class="form-control" formControlName="patch">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" (click)="increase('patch')" type="button">+</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="formErrors.major" class="alert alert-danger">
                        {{ formErrors.major }}
                    </div>
                    <div *ngIf="formErrors.minor" class="alert alert-danger">
                        {{ formErrors.minor }}
                    </div>
                    <div *ngIf="formErrors.patch" class="alert alert-danger">
                        {{ formErrors.patch }}
                    </div>
                    <div class="form-group">
                        <label>Repository Code</label>
                        <input type="text" class="form-control" [readOnly]="isReadOnly" formControlName="repoCode">
                        <div *ngIf="formErrors.repoCode" class="alert alert-danger">
                            {{ formErrors.repoCode }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Update Logs</label>
                        <project-version-log [isReadOnly]="isReadOnly" [group]="form.get('log')"></project-version-log>
                    </div>
                    <div class="row" *ngIf="!isReadOnly">
                        <div class="col-sm-6">
                            <button type="submit" class="btn btn-success btn-block" [disabled]="!form.valid">Submit</button>
                        </div>
                        <div class="col-sm-6">
                            <button type="reset" class="btn btn-default btn-block">Reset</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>